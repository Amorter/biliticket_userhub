server:
  host: "0.0.0.0"
  port: 8080
  mode: "debug"                    # gin mode: debug | release | test
  read_timeout: 10s
  write_timeout: 10s
  graceful_shutdown_timeout: 5s

database:
  postgres:
    host: "localhost"
    port: 5432
    db: "biliticket_userhub"
    user: "postgres"
    password: "postgres"
    sslmode: "disable"
    max_idle_conns: 10
    max_open_conns: 100
    conn_max_lifetime: 1h
    auto_migrate: true
  redis:
    host: "localhost"
    port: 6379
    password: ""
    db: 0
    pool_size: 10

state:
  backend: "redis"                 # "redis" | "memory"

jwt:
  signing_key: "CHANGE_ME_IN_PRODUCTION"
  issuer: "biliticket-userhub"
  access_token_ttl: 15m
  refresh_token_ttl: 168h          # 7 days
  id_token_ttl: 1h

invite:
  enabled: true

admin:
  user_ids: []  # Add admin user UUIDs here, e.g. ["550e8400-e29b-41d4-a716-446655440000"]

oidc:
  issuer: "http://localhost:8080"
  crypto_key: "CHANGE_ME_32_BYTES_FOR_PROD_USE!"  # must be exactly 32 bytes
  login_url: "http://localhost:3000/login?auth_request_id={{ID}}"  # frontend login page

oauth2:
  github:
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/oauth2/github/callback"
    scopes:
      - "read:user"
      - "user:email"
  google:
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/oauth2/google/callback"
    scopes:
      - "openid"
      - "email"
      - "profile"

webauthn:
  rp_display_name: "BiliTicket UserHub"
  rp_id: "localhost"
  rp_origins:
    - "http://localhost:3000"

cors:
  allowed_origins:
    - "http://localhost:3000"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowed_headers:
    - "Authorization"
    - "Content-Type"
  allow_credentials: true
  max_age: 12h

log:
  level: "debug"                   # debug | info | warn | error
  format: "console"               # json | console
