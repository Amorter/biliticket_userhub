这是一个CIAM系统后端，支持单点登录，单点注册，单点注销，OIDC,认证中心，令牌管理等等功能
使用go语言开发，使用gin框架，项目结构如下：
biliticket_userhub/
├── cmd/
│   └── main.go               // FC 入口，初始化 Gin + 依赖
├── internal/
│   ├── handler/              // HTTP 处理入口（类似 controller，但薄）
│   ├── service/              // 核心业务逻辑（放规则、编排、校验）
│   ├── repository/           // 数据访问（Redis 操作封装）
│   ├── model/                // 结构体、DTO（可选，视需要）
│   └── config/               // 配置、环境变量读取
├── pkg/                      // 可复用工具（jwt、crypto 等）
├── go.mod
├── LLM.txt                   // 给llm看的项目描述
└── config.yaml               // 项目配置文件

你可以在config.yaml看到数据库配置，用他们来做一些测试，本项目使用redis(状态存储)和pg(持久化存储)数据库
本项目使用gorm框架

我计划面向云原生开发(同时兼容非云原生部署)，使用阿里云的函数计算FC来部署（使用 FC 的 Custom Runtime），你需要注意将服务需要用到状态的地方写成接口，
提供配置选项。可以选择使用redis还是直接状态放到内存中

对于OIDC协议的实现。你可以使用 github.com/zitadel/oidc 好像这个库既可以当服务提供者也可以当服务消费者
对于passkey的实现，你可以使用 github.com/go-webauthn/webauthn

关于项目的各个模块：
1. 单点登录：
其他的一方应用和三方应用可以通过OIDC协议接入本应用，以使用本账户系统登录其应用
本应用的登录也应该支持多种方式，比如支持google,github等标准的OIDC协议登录
本应用应当可以控制接入本应用的OIDC应用的访问范围scope
本应用不区分组织，凡是在本应用注册过的用户都可以登录绑定本应用的所有一方和三方应用
2. 单点注册：
应当提供统一的注册接口，对于这个接口，要提供邀请码功能，可以选择是否开启使用邀请码才能注册
要提供无密码注册功能，比如绑定oauth2,passkey等登录方式来注册
3. 登录方式绑定
用户可以绑定oauth2,passkey等登录方式，用户的唯一可信凭据应该是本系统中的唯一id
换句话说，不应该提供没有绑定对应oauth2登录的账户，如果用户通过oauth2登录，发现邮箱或用户名相同于是自动绑定对应本系统账户的功能
4. 数据模型
users表应该包含id,status,created_at,updated_at,deleted_at。这里故意不放username/password,把他们当作一种"身份凭证"拆分出去，实现真正的1passwordless架构
user_identities表应该包含id,user_id,identity_type(枚举:password,github,google,passkey,wechat等),identifier(外部/内部唯一标识,如果是password,这里存username或email,如果是github,这里存github的subject_id),credential_data(凭据详情，如果是password,这里存bcrypt hash后的密码，如果是passkey,这里存public key,credential id,sign count等json)
联合唯一索引(identity_type, identifier) 确保每种平台的某个具体身份只能绑定一个内部账号
odic_clients表应该包含client_id,client_secret,name,redirect_uris,allowed_scopes,is_first_party
invite_codes表应该包含id,code,max_uses,used_count,expires_at,created_by

5. Token签发
Access Token和ID Token使用JWT
Refresh Token的有效期可以在config中配置